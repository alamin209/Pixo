<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class Doctors extends CI_Controller {    public function __construct()    {        parent::__construct();        if (!$this->session->userdata('admin_id')) {            return redirect('login');        }        $this->load->model('Admin/doctorsm');        $this->load->model('Admin/Appointmentm');    }    public function index()    {        $data['doctors'] = $this->doctorsm->getAllDoctors();        $this->load->view('Admin/doctors',$data);    }    public function save_doctors()    {        $config=            array (               'upload_path'=>'./public/assets/doctorimage/',                'allowed_types' => "gif|jpg|png|jpeg",                'overwrite' => TRUE,                'max_size' => "2048000", // Can be set to particular file size , here it is 2 MB(2048 Kb)               'max_height' => "768",               'max_width' => "1024"            );        $this->load->library('upload', $config);        $firstname = $this->input->post('firstname');        $lastname = $this->input->post('lastname');        $date_of_Birth = $this->input->post('birth_date');        $gender = $this->input->post('gender');        $depertment = $this->input->post('speciality');        $email = $this->input->post('email');        $doc_username = $this->input->post('username');        $d_image = $_FILES["d_Photo"]["name"];        $doc_pass = $this->input->post('password');        $confirm_password = $this->input->post('confirm_password');        $facebook = $this->input->post('facebook');        $tweet = $this->input->post('tweet');        $inst = $this->input->post('instragram');        $linkdin = $this->input->post('linkdin');        $google_plus = $this->input->post('google_plus');        $phone = $this->input->post('phone');        $email = $this->input->post('email');        $opinion = $this->input->post('url');        $degree = $this->input->post('degree[]');        $insti = $this->input->post('insti[]');        if($this->upload->do_upload('d_Photo')) {            $data1 = $this->upload->data();            $imagepath = base_url("public/assets/doctorimage/" . $data1['raw_name'] . $data1['file_ext']);            $post['imagepath']=$imagepath;            $data = array(                'first_name' => $firstname,                'last_name' => $lastname,                'date_of_Birth' => $date_of_Birth,                'gender' => $gender,                'email' => $email,                'phone' => $phone,//               'description' => $opinion,                'doc_depid' => $depertment,                'doc_username' => $doc_username,                'doc_pass' => $doc_pass,                'tweet' => $tweet,//                'dgree' => $degree,                'instragram' => $inst,                'linkdin' => $linkdin,                'doc_image' => $imagepath,                'facebook' => $facebook,                'google_plus' => $google_plus            );             $degree_id= $this->doctorsm->insertDoctors($data);            if(array_filter($degree)==null && array_filter($inst) ==null) {                $degreeid = array(                    'Degree_Qulificationid '=>$degree_id,                    'Degree_name'=>$degree,                    'inst_name'=>$insti                );                $this->data['error'] = $this->doctorsm->insertDoctorDegree($degreeid);            }            else {                for ($i = 0; $i < count($degree); $i++) {                    $degreeid = array(                        'Degree_Qulificationid ' => $degree_id,                        'Degree_name' => $degree[$i],                        'inst_name' => $insti[$i]                    );                    $this->data['error']= $this->doctorsm->insertDoctorDegree($degreeid);                }            }                if (empty($this->data['error'])) {                    $this->session->set_flashdata('successMessage', ' Doctor  Added Successfully');                    redirect('Admin/Doctors/addDoctor');                } else {                    $this->session->set_flashdata('errorMessage', 'Some thing Went Wrong !! Please Try Again!!');                    redirect('Admin/Doctors/addDoctor');                }            }    }    public  function doctorsProfile($id)    {        $data['depertment'] = $this->Appointmentm->getAllDepertment();        $this->load->view('Admin/doctorprofile');    }    public function addDoctor()    {        $data['depertment'] = $this->Appointmentm->getAllDepertment();        $this->load->view('Admin/adddoctors',$data);    }}